<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LWPR Library: include/lwpr.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>include/lwpr.hh</h1><a href="lwpr_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">LWPR: A library for incremental online learning</span>
<a name="l00003"></a>00003 <span class="comment">Copyright (C) 2007  Stefan Klanke, Sethu Vijayakumar</span>
<a name="l00004"></a>00004 <span class="comment">Contact: sethu.vijayakumar@ed.ac.uk</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">This library is free software; you can redistribute it and/or</span>
<a name="l00007"></a>00007 <span class="comment">modify it under the terms of the GNU Lesser General Public</span>
<a name="l00008"></a>00008 <span class="comment">License as published by the Free Software Foundation; either </span>
<a name="l00009"></a>00009 <span class="comment">version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">This library is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00014"></a>00014 <span class="comment">Library General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">You should have received a copy of the GNU Lesser General Public</span>
<a name="l00017"></a>00017 <span class="comment">License along with this library; if not, write to the Free</span>
<a name="l00018"></a>00018 <span class="comment">Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l00019"></a>00019 <span class="comment">*********************************************************************/</span>
<a name="l00020"></a>00020 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef __LWPR_HH</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define __LWPR_HH</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="lwpr_8h.html">lwpr.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="lwpr__math_8h.html">lwpr_math.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="lwpr__binio_8h.html">lwpr_binio.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="lwpr__xml_8h.html">lwpr_xml.h</a>&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00037"></a>00037 
<a name="l00042"></a><a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">00042</a> <span class="keyword">typedef</span> std::vector&lt;double&gt; <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>;
<a name="l00043"></a>00043 
<a name="l00048"></a><a class="code" href="classLWPR__Exception.html">00048</a> <span class="keyword">class </span><a class="code" href="classLWPR__Exception.html">LWPR_Exception</a> {
<a name="l00049"></a>00049    <span class="keyword">public</span>:
<a name="l00050"></a>00050    
<a name="l00053"></a><a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90">00053</a>    <span class="keyword">typedef</span> <span class="keyword">enum</span> { 
<a name="l00054"></a>00054       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042c52292ae4dc2ee44ec07f932afbc2a">OUT_OF_MEMORY</a>,    
<a name="l00055"></a>00055       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">BAD_INPUT_DIM</a>,    
<a name="l00056"></a>00056       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042930a5c7a7d57a905949a9866c2375e">BAD_OUTPUT_DIM</a>,   
<a name="l00057"></a>00057       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd902bbb73db9e57e272cb7926cadc66762c">BAD_INIT_D</a>,       
<a name="l00058"></a>00058       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90988ae62fcae88a3e7a8b0cd9f3b7760b">UNKNOWN_KERNEL</a>,   
<a name="l00059"></a>00059       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90f0b2cb4c774a84c1462175b921bc7a7b">IO_ERROR</a>,         
<a name="l00060"></a>00060       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9029693c3d5207b6a39ae59fd1c58aab48">OUT_OF_RANGE</a>,     
<a name="l00061"></a><a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c26774625b02fe89a66d5a4d97d15323">00061</a>       <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c26774625b02fe89a66d5a4d97d15323">UNSPECIFIED_ERROR</a> 
<a name="l00062"></a>00062    } <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90">Code</a>;
<a name="l00063"></a>00063    
<a name="l00068"></a><a class="code" href="classLWPR__Exception.html#bbbed6fbe158e48c2fcbc1fcbc88255a">00068</a>    <a class="code" href="classLWPR__Exception.html#bbbed6fbe158e48c2fcbc1fcbc88255a">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90">Code</a> <a class="code" href="classLWPR__Exception.html#1dbc5b2a8314976dc3ace964dcde0f35">code</a>) {
<a name="l00069"></a>00069       this-&gt;code = code;
<a name="l00070"></a>00070    }
<a name="l00071"></a>00071    
<a name="l00073"></a><a class="code" href="classLWPR__Exception.html#17c69d6eef3099b5ffa3f3197193f8dc">00073</a>    <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90">Code</a> <a class="code" href="classLWPR__Exception.html#17c69d6eef3099b5ffa3f3197193f8dc">getCode</a>()<span class="keyword"> const </span>{ 
<a name="l00074"></a>00074       <span class="keywordflow">return</span> <a class="code" href="classLWPR__Exception.html#1dbc5b2a8314976dc3ace964dcde0f35">code</a>;
<a name="l00075"></a>00075    }
<a name="l00076"></a>00076 
<a name="l00078"></a><a class="code" href="classLWPR__Exception.html#12f5c6da51ac3b6a9a0b67ce931e19f0">00078</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLWPR__Exception.html#12f5c6da51ac3b6a9a0b67ce931e19f0">getString</a>()<span class="keyword"> const </span>{
<a name="l00079"></a>00079       <span class="keywordflow">switch</span>(<a class="code" href="classLWPR__Exception.html#1dbc5b2a8314976dc3ace964dcde0f35">code</a>) {
<a name="l00080"></a>00080          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042c52292ae4dc2ee44ec07f932afbc2a">OUT_OF_MEMORY</a>: 
<a name="l00081"></a>00081             <span class="keywordflow">return</span> <span class="stringliteral">"Insufficient memory to allocate storage."</span>;
<a name="l00082"></a>00082          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">BAD_INPUT_DIM</a>: 
<a name="l00083"></a>00083             <span class="keywordflow">return</span> <span class="stringliteral">"Input dimensionality does not match."</span>;
<a name="l00084"></a>00084          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042930a5c7a7d57a905949a9866c2375e">BAD_OUTPUT_DIM</a>: 
<a name="l00085"></a>00085             <span class="keywordflow">return</span> <span class="stringliteral">"Output dimensionality does not match."</span>;
<a name="l00086"></a>00086          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd902bbb73db9e57e272cb7926cadc66762c">BAD_INIT_D</a>: 
<a name="l00087"></a>00087             <span class="keywordflow">return</span> <span class="stringliteral">"Invalid initial distance metric (not positive definite)."</span>;
<a name="l00088"></a>00088          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90988ae62fcae88a3e7a8b0cd9f3b7760b">UNKNOWN_KERNEL</a>:
<a name="l00089"></a>00089             <span class="keywordflow">return</span> <span class="stringliteral">"Passed kernel name was not recognised."</span>;
<a name="l00090"></a>00090          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90f0b2cb4c774a84c1462175b921bc7a7b">IO_ERROR</a>:
<a name="l00091"></a>00091             <span class="keywordflow">return</span> <span class="stringliteral">"An error occurred during I/O operations."</span>;
<a name="l00092"></a>00092          <span class="keywordflow">case</span> <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9029693c3d5207b6a39ae59fd1c58aab48">OUT_OF_RANGE</a>:
<a name="l00093"></a>00093             <span class="keywordflow">return</span> <span class="stringliteral">"Index parameter out of range."</span>;
<a name="l00094"></a>00094          <span class="keywordflow">default</span>:
<a name="l00095"></a>00095             <span class="keywordflow">return</span> <span class="stringliteral">"Oops: Unspecified error."</span>;
<a name="l00096"></a>00096       }
<a name="l00097"></a>00097    }
<a name="l00098"></a>00098    
<a name="l00099"></a>00099    <span class="keyword">private</span>:
<a name="l00100"></a>00100    
<a name="l00102"></a><a class="code" href="classLWPR__Exception.html#1dbc5b2a8314976dc3ace964dcde0f35">00102</a>    <a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90">Code</a> <a class="code" href="classLWPR__Exception.html#1dbc5b2a8314976dc3ace964dcde0f35">code</a>;
<a name="l00103"></a>00103 };
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keyword">class </span><a class="code" href="classLWPR__Object.html">LWPR_Object</a>;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00113"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html">00113</a> <span class="keyword">class </span><a class="code" href="classLWPR__ReceptiveFieldObject.html">LWPR_ReceptiveFieldObject</a> {
<a name="l00114"></a>00114    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classLWPR__Object.html">LWPR_Object</a>;
<a name="l00115"></a>00115    
<a name="l00116"></a>00116    <span class="keyword">public</span>:
<a name="l00117"></a>00117    
<a name="l00119"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#bf86145392de5bc6453099fc0a0a91e8">00119</a>    <span class="keywordtype">int</span> <a class="code" href="classLWPR__ReceptiveFieldObject.html#bf86145392de5bc6453099fc0a0a91e8">nReg</a>()<span class="keyword"> const </span>{ 
<a name="l00120"></a>00120       <span class="keywordflow">return</span> <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#c546464cfe5a704b612229455832c7fc">nReg</a>; 
<a name="l00121"></a>00121    }
<a name="l00122"></a>00122    
<a name="l00124"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#d1b835d0ad30fb8a42fe4628d9774ee6">00124</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> <a class="code" href="classLWPR__ReceptiveFieldObject.html#d1b835d0ad30fb8a42fe4628d9774ee6">meanX</a>()<span class="keyword"> const </span>{
<a name="l00125"></a>00125       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> mx(<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);   
<a name="l00126"></a>00126       memcpy(&amp;mx[0], <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#a323e941ebf59b6e6e2fd4a7a1217961">mean_x</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);
<a name="l00127"></a>00127       <span class="keywordflow">return</span> mx;
<a name="l00128"></a>00128    }   
<a name="l00129"></a>00129    
<a name="l00131"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#7cd6a0264ecd9a81da2a17663ffa6877">00131</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> <a class="code" href="classLWPR__ReceptiveFieldObject.html#7cd6a0264ecd9a81da2a17663ffa6877">varX</a>()<span class="keyword"> const </span>{
<a name="l00132"></a>00132       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> vx(<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);   
<a name="l00133"></a>00133       memcpy(&amp;vx[0], <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#e02d2cb4b7921b2ef08916a44bea9302">var_x</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);
<a name="l00134"></a>00134       <span class="keywordflow">return</span> vx;
<a name="l00135"></a>00135    } 
<a name="l00136"></a>00136    
<a name="l00138"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#2ea3e7f18ac8268013773ca5b0089d75">00138</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> <a class="code" href="classLWPR__ReceptiveFieldObject.html#2ea3e7f18ac8268013773ca5b0089d75">center</a>()<span class="keyword"> const </span>{
<a name="l00139"></a>00139       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> c(<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);
<a name="l00140"></a>00140       memcpy(&amp;c[0], <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#964ec748c6c1912d2dae205ffd0e9538">c</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);    
<a name="l00141"></a>00141       <span class="keywordflow">return</span> c;  
<a name="l00142"></a>00142    }
<a name="l00143"></a>00143    
<a name="l00145"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#867622debc6ae83dad96f0d57cb09192">00145</a>    <span class="keywordtype">bool</span> <a class="code" href="classLWPR__ReceptiveFieldObject.html#867622debc6ae83dad96f0d57cb09192">trustworthy</a>()<span class="keyword"> const </span>{
<a name="l00146"></a>00146       <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#00bef7cac4f4c5d7247d743a2ff4cb23">trustworthy</a>;
<a name="l00147"></a>00147    }
<a name="l00148"></a>00148 
<a name="l00150"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#945a220ba6663971749d60f4c918483c">00150</a>    std::vector&lt;doubleVec&gt; <a class="code" href="classLWPR__ReceptiveFieldObject.html#945a220ba6663971749d60f4c918483c">D</a>()<span class="keyword"> const </span>{
<a name="l00151"></a>00151       std::vector&lt;doubleVec&gt; ds(<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>);
<a name="l00152"></a>00152       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">nIn</a>;i++) {
<a name="l00153"></a>00153          ds[i].resize(nIn);
<a name="l00154"></a>00154          memcpy(&amp;ds[i][0], <a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">RF</a>-&gt;<a class="code" href="structLWPR__ReceptiveField.html#4db0b9fe362a4d9ef236fff183f33bd7">D</a> + i*<a class="code" href="classLWPR__ReceptiveFieldObject.html#e5889ed0171c7a56fea4a1c3ad99c7fb">nInS</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nIn);    
<a name="l00155"></a>00155       }
<a name="l00156"></a>00156       <span class="keywordflow">return</span> ds;
<a name="l00157"></a>00157    }
<a name="l00158"></a>00158 
<a name="l00161"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#d90f5d85fc1b6328b38a958a550473d3">00161</a>    std::vector&lt;doubleVec&gt; M()<span class="keyword"> const </span>{
<a name="l00162"></a>00162       std::vector&lt;doubleVec&gt; ms(<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00163"></a>00163       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>;i++) {
<a name="l00164"></a>00164          ms[i].resize(i+1);
<a name="l00165"></a>00165          memcpy(&amp;ms[i][0], RF-&gt;M + i*nInS, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*(i+1));    
<a name="l00166"></a>00166       }
<a name="l00167"></a>00167       <span class="keywordflow">return</span> ms;
<a name="l00168"></a>00168    }
<a name="l00169"></a>00169    
<a name="l00171"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#d2b6446cb00ff140dda2c8eeba743316">00171</a>    std::vector&lt;doubleVec&gt; U()<span class="keyword"> const </span>{
<a name="l00172"></a>00172       std::vector&lt;doubleVec&gt; us(RF-&gt;nReg);
<a name="l00173"></a>00173       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;RF-&gt;nReg;i++) {
<a name="l00174"></a>00174          us[i].resize(<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00175"></a>00175          memcpy(&amp;us[i][0], RF-&gt;U + i*nInS, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nIn);
<a name="l00176"></a>00176       }
<a name="l00177"></a>00177       <span class="keywordflow">return</span> us;
<a name="l00178"></a>00178    }   
<a name="l00179"></a>00179    
<a name="l00181"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#6118e05dbd9e0231a4cd6dd208dee6b6">00181</a>    std::vector&lt;doubleVec&gt; P()<span class="keyword"> const </span>{
<a name="l00182"></a>00182       std::vector&lt;doubleVec&gt; ps(RF-&gt;nReg);
<a name="l00183"></a>00183       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;RF-&gt;nReg;i++) {
<a name="l00184"></a>00184          ps[i].resize(<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00185"></a>00185          memcpy(&amp;ps[i][0], RF-&gt;P + i*nInS, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nIn);
<a name="l00186"></a>00186       }
<a name="l00187"></a>00187       <span class="keywordflow">return</span> ps;
<a name="l00188"></a>00188    }   
<a name="l00189"></a>00189    
<a name="l00191"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#0ad1005ddbf779b32fdb0c9b6297ceae">00191</a>    <span class="keywordtype">double</span> beta0()<span class="keyword"> const </span>{
<a name="l00192"></a>00192       <span class="keywordflow">return</span> RF-&gt;beta0;
<a name="l00193"></a>00193    }
<a name="l00194"></a>00194    
<a name="l00196"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#3211a2a9f553826d744508f8755ac305">00196</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> beta()<span class="keyword"> const </span>{
<a name="l00197"></a>00197       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> be(RF-&gt;nReg);
<a name="l00198"></a>00198       memcpy(&amp;be[0], RF-&gt;beta, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*RF-&gt;nReg);      
<a name="l00199"></a>00199       <span class="keywordflow">return</span> be;
<a name="l00200"></a>00200    }
<a name="l00201"></a>00201    
<a name="l00203"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#99fc23aa82c38b760f88f7c0cf090046">00203</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> numData()<span class="keyword"> const </span>{
<a name="l00204"></a>00204       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> nd(RF-&gt;nReg);
<a name="l00205"></a>00205       memcpy(&amp;nd[0], RF-&gt;n_data, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*RF-&gt;nReg);      
<a name="l00206"></a>00206       <span class="keywordflow">return</span> nd;
<a name="l00207"></a>00207    }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209    
<a name="l00211"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#67d8700a7f614fa33c75028c9afe1dc4">00211</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> slope()<span class="keyword"> const </span>{
<a name="l00212"></a>00212       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> s(<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00213"></a>00213       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> t(<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00214"></a>00214       
<a name="l00215"></a>00215       <span class="keywordflow">if</span> (RF-&gt;slopeReady) {
<a name="l00216"></a>00216          memcpy(&amp;s[0], RF-&gt;slope, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*RF-&gt;nReg);
<a name="l00217"></a>00217       } <span class="keywordflow">else</span> {
<a name="l00218"></a>00218          <span class="comment">// calculate the slope by hand, without using any model-internal storage</span>
<a name="l00219"></a>00219          <span class="comment">// we do this because we do not want this code to interfere with the "real"</span>
<a name="l00220"></a>00220          <span class="comment">// LWPR_Model</span>
<a name="l00221"></a>00221          <a class="code" href="lwpr__math_8h.html#35c39d5895a3541bd1e829e6014d5f70">lwpr_math_scalar_vector</a>(&amp;s[0], RF-&gt;beta[0], RF-&gt;U, <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00222"></a>00222          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1;i&lt;RF-&gt;nReg;i++) {
<a name="l00223"></a>00223             <a class="code" href="lwpr__math_8h.html#35c39d5895a3541bd1e829e6014d5f70">lwpr_math_scalar_vector</a>(&amp;t[0], RF-&gt;beta[i], RF-&gt;U + i*nInS, <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00224"></a>00224             for (<span class="keywordtype">int</span> j=i-1;j&gt;=0;j--) {
<a name="l00225"></a>00225                <span class="comment">// left-multiply  (I - u_j * p_j^T)</span>
<a name="l00226"></a>00226                <span class="keywordtype">double</span> dp = <a class="code" href="lwpr__math_8h.html#f59dc0eb341b4f083ed7c60c0df58f3a">lwpr_math_dot_product</a>(&amp;t[0],RF-&gt;P + j*nInS, <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00227"></a>00227                <a class="code" href="lwpr__math_8h.html#d805837b8bdb0f818fb4898de3398b8b">lwpr_math_add_scalar_vector</a>(&amp;t[0], dp, RF-&gt;U + j*nInS, <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>);
<a name="l00228"></a>00228             }
<a name="l00229"></a>00229             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m=0;m&lt;<a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>;m++) s[m]+=t[m];
<a name="l00230"></a>00230          }
<a name="l00231"></a>00231       }
<a name="l00232"></a>00232       <span class="keywordflow">return</span> s;
<a name="l00233"></a>00233    }
<a name="l00234"></a>00234    
<a name="l00235"></a>00235    <span class="keyword">private</span>:
<a name="l00236"></a>00236 
<a name="l00238"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#6a6fcc0cc305bed8adeb241d15169356">00238</a>    <a class="code" href="classLWPR__ReceptiveFieldObject.html">LWPR_ReceptiveFieldObject</a>(<a class="code" href="structLWPR__ReceptiveField.html">LWPR_ReceptiveField</a> *rf) {
<a name="l00239"></a>00239       this-&gt;RF = rf;
<a name="l00240"></a>00240       <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a> = rf-&gt;<a class="code" href="structLWPR__ReceptiveField.html#3f1d47f23a25e0927362633e912bec39">model</a>-&gt;<a class="code" href="structLWPR__Model.html#7916bf48b25b0d02a9b8c679eca388ba">nIn</a>;
<a name="l00241"></a>00241       nInS = rf-&gt;<a class="code" href="structLWPR__ReceptiveField.html#3f1d47f23a25e0927362633e912bec39">model</a>-&gt;<a class="code" href="structLWPR__Model.html#51dc4b40e2c65938e94a5c1388094a66">nInStore</a>;
<a name="l00242"></a>00242    }
<a name="l00243"></a>00243    
<a name="l00245"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#d24e83a2f22eab6b67684d3d40b7b915">00245</a>    <span class="keyword">const</span> <a class="code" href="structLWPR__ReceptiveField.html">LWPR_ReceptiveField</a> *RF;
<a name="l00246"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#cdf9f27fba45c0754652e311a2baad84">00246</a>    <span class="keywordtype">int</span> <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>;   
<a name="l00247"></a><a class="code" href="classLWPR__ReceptiveFieldObject.html#e5889ed0171c7a56fea4a1c3ad99c7fb">00247</a>    <span class="keywordtype">int</span> nInS;  
<a name="l00248"></a>00248 };
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00254"></a><a class="code" href="classLWPR__Object.html">00254</a> <span class="keyword">class </span><a class="code" href="classLWPR__Object.html">LWPR_Object</a> {
<a name="l00255"></a>00255    <span class="keyword">public</span>:
<a name="l00256"></a>00256    
<a name="l00265"></a><a class="code" href="classLWPR__Object.html#09cade061b62f2a999b4bf76919cea54">00265</a>    <a class="code" href="classLWPR__Object.html#09cade061b62f2a999b4bf76919cea54">LWPR_Object</a>(<span class="keywordtype">int</span> <a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">nIn</a>, <span class="keywordtype">int</span> <a class="code" href="classLWPR__Object.html#f70883e24f8710d0c5d0487fb7a1eec1">nOut</a>) {
<a name="l00266"></a>00266       <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#gbf0e6a9a1dc3024f34b82c1c1e3afec1">lwpr_init_model</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>, nIn, nOut, NULL)) {
<a name="l00267"></a>00267          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042c52292ae4dc2ee44ec07f932afbc2a">LWPR_Exception::OUT_OF_MEMORY</a>);
<a name="l00268"></a>00268       }
<a name="l00269"></a>00269    }
<a name="l00270"></a>00270    
<a name="l00278"></a><a class="code" href="classLWPR__Object.html#61130d9912ea5a8be331cff65727ed72">00278</a>    <a class="code" href="classLWPR__Object.html#09cade061b62f2a999b4bf76919cea54">LWPR_Object</a>(<span class="keyword">const</span> <a class="code" href="classLWPR__Object.html">LWPR_Object</a>&amp; otherObj) {
<a name="l00279"></a>00279       <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#g399db388667bdacbc7de8fce64ac71fe">lwpr_duplicate_model</a>(&amp;(this-&gt;model), &amp;(otherObj.<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>))) {
<a name="l00280"></a>00280          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042c52292ae4dc2ee44ec07f932afbc2a">LWPR_Exception::OUT_OF_MEMORY</a>);
<a name="l00281"></a>00281       }
<a name="l00282"></a>00282    }
<a name="l00283"></a>00283    
<a name="l00292"></a><a class="code" href="classLWPR__Object.html#6bb3394bc3a5a1a4d1dcb319c8bef8f5">00292</a>    <a class="code" href="classLWPR__Object.html#09cade061b62f2a999b4bf76919cea54">LWPR_Object</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename) {
<a name="l00293"></a>00293       <span class="keywordtype">int</span> ok;
<a name="l00294"></a>00294       <span class="comment">// First try treating the file as binary</span>
<a name="l00295"></a>00295       ok = <a class="code" href="group__LWPR__C.html#g0e34906e93fede7a1c2922d6fd94aa6f">lwpr_read_binary</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>, filename);
<a name="l00296"></a>00296 <span class="preprocessor">      #ifdef USE_EXPAT</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (!ok) {
<a name="l00298"></a>00298          <span class="keywordtype">int</span> numErr, numWar;
<a name="l00299"></a>00299          numErr = <a class="code" href="group__LWPR__C.html#gba73ce4e0600f76eca4ae513aaf55ca0">lwpr_read_xml</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>, filename, &amp;numWar);
<a name="l00300"></a>00300          ok = (numErr == 0);
<a name="l00301"></a>00301       }
<a name="l00302"></a>00302 <span class="preprocessor">      #endif</span>
<a name="l00303"></a>00303 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (!ok) <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90f0b2cb4c774a84c1462175b921bc7a7b">LWPR_Exception::IO_ERROR</a>);
<a name="l00304"></a>00304    }
<a name="l00305"></a>00305 
<a name="l00307"></a><a class="code" href="classLWPR__Object.html#4849768acc043ef85b501c30ae7c479c">00307</a>    <a class="code" href="classLWPR__Object.html#4849768acc043ef85b501c30ae7c479c">~LWPR_Object</a>() {
<a name="l00308"></a>00308       <a class="code" href="group__LWPR__C.html#g124a65ecb03d2dfc1e9de792e0c7e79a">lwpr_free_model</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>);
<a name="l00309"></a>00309    }
<a name="l00310"></a>00310    
<a name="l00317"></a><a class="code" href="classLWPR__Object.html#ab7d9b04e7512fa19e8c7a3a8d8219fe">00317</a>    <span class="keywordtype">int</span> <a class="code" href="classLWPR__Object.html#ab7d9b04e7512fa19e8c7a3a8d8219fe">writeXML</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename) {
<a name="l00318"></a>00318       <span class="keywordflow">return</span> <a class="code" href="group__LWPR__C.html#gd2aa90e9cd94d90c343a891139dca699">lwpr_write_xml</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>, filename);
<a name="l00319"></a>00319    }
<a name="l00320"></a>00320    
<a name="l00327"></a><a class="code" href="classLWPR__Object.html#f4b7625b779be1ebc5260ef5cbb21650">00327</a>    <span class="keywordtype">int</span> <a class="code" href="classLWPR__Object.html#f4b7625b779be1ebc5260ef5cbb21650">writeBinary</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename) {
<a name="l00328"></a>00328       <span class="keywordflow">return</span> <a class="code" href="group__LWPR__C.html#gfe857c18c645e8287df66bb51d0518c0">lwpr_write_binary</a>(&amp;<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>, filename);
<a name="l00329"></a>00329    }
<a name="l00330"></a>00330       
<a name="l00345"></a><a class="code" href="classLWPR__Object.html#cca3bf93ddb93c107e5865c6b84c7d61">00345</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> <a class="code" href="classLWPR__Object.html#cca3bf93ddb93c107e5865c6b84c7d61">update</a>(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; x, <span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; y) {
<a name="l00346"></a>00346       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> yp(<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>.<a class="code" href="structLWPR__Model.html#413b529039261b154164ad1022b942b7">nOut</a>);
<a name="l00347"></a>00347       
<a name="l00348"></a>00348       <span class="keywordflow">if</span> (x.size()!=<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>.<a class="code" href="structLWPR__Model.html#7916bf48b25b0d02a9b8c679eca388ba">nIn</a>) {
<a name="l00349"></a>00349          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);
<a name="l00350"></a>00350       }
<a name="l00351"></a>00351       
<a name="l00352"></a>00352       <span class="keywordflow">if</span> (y.size()!=<a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">model</a>.<a class="code" href="structLWPR__Model.html#413b529039261b154164ad1022b942b7">nOut</a>) {
<a name="l00353"></a>00353          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042930a5c7a7d57a905949a9866c2375e">LWPR_Exception::BAD_OUTPUT_DIM</a>);
<a name="l00354"></a>00354       }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356       <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#g860606afd6c9cdbb4600abc812298f09">lwpr_update</a>(&amp;model, &amp;x[0], &amp;y[0], &amp;yp[0], NULL)) {
<a name="l00357"></a>00357          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042c52292ae4dc2ee44ec07f932afbc2a">LWPR_Exception::OUT_OF_MEMORY</a>);
<a name="l00358"></a>00358       }
<a name="l00359"></a>00359       <span class="keywordflow">return</span> yp;
<a name="l00360"></a>00360    }
<a name="l00361"></a>00361    
<a name="l00372"></a><a class="code" href="classLWPR__Object.html#8279dcd9c989af0bde9994d7afa229a3">00372</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> predict(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; x, <span class="keywordtype">double</span> cutoff = 0.001) {
<a name="l00373"></a>00373       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> yp(model.nOut);   
<a name="l00374"></a>00374 
<a name="l00375"></a>00375       <span class="keywordflow">if</span> (x.size()!=model.nIn) {
<a name="l00376"></a>00376          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);
<a name="l00377"></a>00377       }      
<a name="l00378"></a>00378 
<a name="l00379"></a>00379       <a class="code" href="group__LWPR__C.html#geb29e15d4c9d85c70df477810980a9c1">lwpr_predict</a>(&amp;model, &amp;x[0], cutoff, &amp;yp[0], NULL, NULL);
<a name="l00380"></a>00380       <span class="keywordflow">return</span> yp;
<a name="l00381"></a>00381    }
<a name="l00382"></a>00382    
<a name="l00396"></a><a class="code" href="classLWPR__Object.html#e74963c51f67ed269b06e98b47578a30">00396</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> predict(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; x, <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; confidence, <span class="keywordtype">double</span> cutoff = 0.001) {
<a name="l00397"></a>00397       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> yp(model.nOut);   
<a name="l00398"></a>00398       
<a name="l00399"></a>00399       <span class="keywordflow">if</span> (x.size()!=model.nIn) {
<a name="l00400"></a>00400          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);
<a name="l00401"></a>00401       }      
<a name="l00402"></a>00402       <span class="keywordflow">if</span> (confidence.size()!=model.nOut) confidence.resize(model.nOut);
<a name="l00403"></a>00403 
<a name="l00404"></a>00404       <a class="code" href="group__LWPR__C.html#geb29e15d4c9d85c70df477810980a9c1">lwpr_predict</a>(&amp;model, &amp;x[0], cutoff, &amp;yp[0], &amp;confidence[0], NULL);
<a name="l00405"></a>00405       <span class="keywordflow">return</span> yp;
<a name="l00406"></a>00406    }  
<a name="l00407"></a>00407    
<a name="l00423"></a><a class="code" href="classLWPR__Object.html#0054f85362aa7a642a383bbb26440735">00423</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> predict(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; x, <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; confidence, <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; maxW, <span class="keywordtype">double</span> cutoff = 0.001) {
<a name="l00424"></a>00424       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> yp(model.nOut);   
<a name="l00425"></a>00425       
<a name="l00426"></a>00426       <span class="keywordflow">if</span> (x.size()!=model.nIn) {
<a name="l00427"></a>00427          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);
<a name="l00428"></a>00428       }      
<a name="l00429"></a>00429       <span class="keywordflow">if</span> (confidence.size()!=model.nOut) confidence.resize(model.nOut);
<a name="l00430"></a>00430       <span class="keywordflow">if</span> (maxW.size()!=model.nOut) maxW.resize(model.nOut);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432       <a class="code" href="group__LWPR__C.html#geb29e15d4c9d85c70df477810980a9c1">lwpr_predict</a>(&amp;model, &amp;x[0], cutoff, &amp;yp[0], &amp;confidence[0], &amp;maxW[0]);
<a name="l00433"></a>00433       <span class="keywordflow">return</span> yp;
<a name="l00434"></a>00434    } 
<a name="l00435"></a>00435    
<a name="l00441"></a><a class="code" href="classLWPR__Object.html#cb9d43c5851f6d86d0088b4974eb48e7">00441</a>    <span class="keywordtype">void</span> setInitD(<span class="keywordtype">double</span> delta) {
<a name="l00442"></a>00442       <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#gd5036bc4a011709141de555dedd5200f">lwpr_set_init_D_spherical</a>(&amp;model,delta)) {
<a name="l00443"></a>00443          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd902bbb73db9e57e272cb7926cadc66762c">LWPR_Exception::BAD_INIT_D</a>);
<a name="l00444"></a>00444       }
<a name="l00445"></a>00445    }
<a name="l00446"></a>00446 
<a name="l00454"></a><a class="code" href="classLWPR__Object.html#dfcad127449d5c761503997f9b4fa646">00454</a>    <span class="keywordtype">void</span> setInitD(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; initD) {
<a name="l00455"></a>00455       <span class="keywordflow">if</span> (initD.size()==model.nIn) {
<a name="l00456"></a>00456          <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#gaa780c71f337ca793041a323249dc1b4">lwpr_set_init_D_diagonal</a>(&amp;model,&amp;initD[0])) {
<a name="l00457"></a>00457             <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd902bbb73db9e57e272cb7926cadc66762c">LWPR_Exception::BAD_INIT_D</a>);
<a name="l00458"></a>00458          }
<a name="l00459"></a>00459       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (initD.size()==model.nIn*model.nIn) {
<a name="l00460"></a>00460          <span class="keywordflow">if</span> (!<a class="code" href="group__LWPR__C.html#ga940075be3327b82bdb19257d38d64ac">lwpr_set_init_D</a>(&amp;model,&amp;initD[0],model.nIn)) {
<a name="l00461"></a>00461             <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd902bbb73db9e57e272cb7926cadc66762c">LWPR_Exception::BAD_INIT_D</a>);
<a name="l00462"></a>00462          }
<a name="l00463"></a>00463       } <span class="keywordflow">else</span> {
<a name="l00464"></a>00464          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);
<a name="l00465"></a>00465       }
<a name="l00466"></a>00466    }
<a name="l00467"></a>00467    
<a name="l00469"></a><a class="code" href="classLWPR__Object.html#cdedab144e8850cb4c0cb3247fb3848b">00469</a>    <span class="keywordtype">void</span> setInitAlpha(<span class="keywordtype">double</span> alpha) {
<a name="l00470"></a>00470       <a class="code" href="group__LWPR__C.html#g82bbe3f6a945316c1d8be95c30b805d4">lwpr_set_init_alpha</a>(&amp;model,alpha);
<a name="l00471"></a>00471    }
<a name="l00472"></a>00472    
<a name="l00474"></a><a class="code" href="classLWPR__Object.html#be2ae629a74ecf56beb6cb07ab41f898">00474</a>    <span class="keywordtype">void</span> wGen(<span class="keywordtype">double</span> w_gen) { model.w_gen = w_gen; }
<a name="l00475"></a>00475    
<a name="l00477"></a><a class="code" href="classLWPR__Object.html#0773be18dcd11297b0301429cab28b66">00477</a>    <span class="keywordtype">void</span> wPrune(<span class="keywordtype">double</span> w_prune) { model.w_prune = w_prune; }
<a name="l00478"></a>00478 
<a name="l00480"></a><a class="code" href="classLWPR__Object.html#20c74bb5f8a0b720bc75185b6a1c61d3">00480</a>    <span class="keywordtype">void</span> penalty(<span class="keywordtype">double</span> pen) { model.penalty = pen; }
<a name="l00481"></a>00481    
<a name="l00483"></a><a class="code" href="classLWPR__Object.html#58bd12e2463d8ffc2474ec0dfaf7e47c">00483</a>    <span class="keywordtype">void</span> initLambda(<span class="keywordtype">double</span> iLam) { model.init_lambda = iLam; }
<a name="l00484"></a>00484    
<a name="l00486"></a><a class="code" href="classLWPR__Object.html#71b697fc1552173420abd92564af3bda">00486</a>    <span class="keywordtype">void</span> tauLambda(<span class="keywordtype">double</span> tLam) { model.tau_lambda = tLam; }
<a name="l00487"></a>00487       
<a name="l00489"></a><a class="code" href="classLWPR__Object.html#df9e189f6ed269b83ea7eea48e67375d">00489</a>    <span class="keywordtype">void</span> finalLambda(<span class="keywordtype">double</span> fLam) { model.final_lambda = fLam; }
<a name="l00490"></a>00490    
<a name="l00492"></a><a class="code" href="classLWPR__Object.html#314cfbcd3cd4338f2489170089305dc2">00492</a>    <span class="keywordtype">void</span> initS2(<span class="keywordtype">double</span> init_s2) { model.init_S2 = init_s2; }
<a name="l00493"></a>00493    
<a name="l00495"></a><a class="code" href="classLWPR__Object.html#6baa010b58c449fb2ce67e140e502297">00495</a>    <span class="keywordtype">void</span> updateD(<span class="keywordtype">bool</span> update) { model.update_D = update ? 1:0; }
<a name="l00496"></a>00496    
<a name="l00498"></a><a class="code" href="classLWPR__Object.html#ce82952f572d9113739fee9d29ada33a">00498</a>    <span class="keywordtype">void</span> diagOnly(<span class="keywordtype">bool</span> dOnly) { model.diag_only = dOnly ? 1:0; }
<a name="l00499"></a>00499    
<a name="l00501"></a><a class="code" href="classLWPR__Object.html#c9582d8cd9be50a7477c56597f8de6c6">00501</a>    <span class="keywordtype">void</span> useMeta(<span class="keywordtype">bool</span> meta) { model.meta = meta ? 1:0; }
<a name="l00502"></a>00502    
<a name="l00504"></a><a class="code" href="classLWPR__Object.html#85282f9825d4231b6ed7f0c99f719d29">00504</a>    <span class="keywordtype">void</span> metaRate(<span class="keywordtype">double</span> rate) { model.meta_rate = rate; }
<a name="l00505"></a>00505    
<a name="l00507"></a><a class="code" href="classLWPR__Object.html#f6db3308d1d6f929ccb60c1ab0b95ab8">00507</a>    <span class="keywordtype">void</span> kernel(<a class="code" href="group__LWPR__C.html#g1f22895eac9bf5440370f674f248f81d">LWPR_Kernel</a> kern) { model.kernel = kern; }
<a name="l00508"></a>00508    
<a name="l00510"></a><a class="code" href="classLWPR__Object.html#48fbe14ddb96537b629200a6fe4d8cb8">00510</a>    <span class="keywordtype">void</span> kernel(<span class="keyword">const</span> <span class="keywordtype">char</span> *str) {
<a name="l00511"></a>00511       <span class="keywordflow">if</span> (!strcmp(str,<span class="stringliteral">"Gaussian"</span>)) {
<a name="l00512"></a>00512          model.kernel = <a class="code" href="group__LWPR__C.html#gg1f22895eac9bf5440370f674f248f81d5fa59513178080a60425856360e5c7e9">LWPR_GAUSSIAN_KERNEL</a>;
<a name="l00513"></a>00513          <span class="keywordflow">return</span>;
<a name="l00514"></a>00514       }
<a name="l00515"></a>00515       <span class="keywordflow">if</span> (!strcmp(str,<span class="stringliteral">"BiSquare"</span>)) {
<a name="l00516"></a>00516          model.kernel = <a class="code" href="group__LWPR__C.html#gg1f22895eac9bf5440370f674f248f81d502608cb5b58ce3559a05b0b53b3eef9">LWPR_BISQUARE_KERNEL</a>;
<a name="l00517"></a>00517          <span class="keywordflow">return</span>;
<a name="l00518"></a>00518       }
<a name="l00519"></a>00519       <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90988ae62fcae88a3e7a8b0cd9f3b7760b">LWPR_Exception::UNKNOWN_KERNEL</a>);
<a name="l00520"></a>00520    }
<a name="l00521"></a>00521    
<a name="l00523"></a><a class="code" href="classLWPR__Object.html#0756fc2f4688ae000d08470ec26afb03">00523</a>    <span class="keywordtype">int</span> nData()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.n_data; }
<a name="l00524"></a>00524    
<a name="l00526"></a><a class="code" href="classLWPR__Object.html#7d27f6222a9a9075948ffce746057297">00526</a>    <span class="keywordtype">int</span> nIn()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.nIn; }
<a name="l00527"></a>00527    
<a name="l00529"></a><a class="code" href="classLWPR__Object.html#f70883e24f8710d0c5d0487fb7a1eec1">00529</a>    <span class="keywordtype">int</span> nOut()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.nOut; }
<a name="l00530"></a>00530    
<a name="l00532"></a><a class="code" href="classLWPR__Object.html#e8b2b4e566ecd49622db636e4d788293">00532</a>    <span class="keywordtype">double</span> wGen()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.w_gen; }
<a name="l00533"></a>00533    
<a name="l00535"></a><a class="code" href="classLWPR__Object.html#5fe3a14850ea5093c4b19375d34fd47a">00535</a>    <span class="keywordtype">double</span> wPrune()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.w_prune; }   
<a name="l00536"></a>00536    
<a name="l00538"></a><a class="code" href="classLWPR__Object.html#1ead6d1526cb17ec5b94d75d22657d8d">00538</a>    <span class="keywordtype">double</span> penalty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.penalty; }
<a name="l00539"></a>00539    
<a name="l00541"></a><a class="code" href="classLWPR__Object.html#b89ab665d1e8f99d03865f1cdaaa7358">00541</a>    <span class="keywordtype">double</span> initLambda()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.init_lambda; }
<a name="l00542"></a>00542 
<a name="l00544"></a><a class="code" href="classLWPR__Object.html#1970a2feae1f600c2233b6660b70b041">00544</a>    <span class="keywordtype">double</span> tauLambda()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.tau_lambda; }
<a name="l00545"></a>00545 
<a name="l00547"></a><a class="code" href="classLWPR__Object.html#98efa9c50df861ed696f041be74e575e">00547</a>    <span class="keywordtype">double</span> finalLambda()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.final_lambda; }
<a name="l00548"></a>00548    
<a name="l00550"></a><a class="code" href="classLWPR__Object.html#2ade7faef05c1d33373e90b10b7fce83">00550</a>    <span class="keywordtype">double</span> initS2()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> model.init_S2; }
<a name="l00551"></a>00551    
<a name="l00553"></a><a class="code" href="classLWPR__Object.html#44598ff7d0093f3e4e71a379a01cc9d2">00553</a>    <span class="keywordtype">bool</span> updateD() { <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) model.update_D; }
<a name="l00554"></a>00554 
<a name="l00556"></a><a class="code" href="classLWPR__Object.html#25a41cfe2ebc332bf2bc123d0c27a005">00556</a>    <span class="keywordtype">bool</span> diagOnly() { <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) model.diag_only; }
<a name="l00557"></a>00557    
<a name="l00559"></a><a class="code" href="classLWPR__Object.html#caac099bb0b6e423faa730500cf772f8">00559</a>    <span class="keywordtype">bool</span> useMeta() { <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) model.meta; }
<a name="l00560"></a>00560    
<a name="l00562"></a><a class="code" href="classLWPR__Object.html#871977d290639649c6542197f0b5e185">00562</a>    <span class="keywordtype">double</span> metaRate() { <span class="keywordflow">return</span> model.meta_rate; }
<a name="l00563"></a>00563 
<a name="l00565"></a><a class="code" href="classLWPR__Object.html#a41c97a04c16110b686d4da2251cb508">00565</a>    <a class="code" href="group__LWPR__C.html#g1f22895eac9bf5440370f674f248f81d">LWPR_Kernel</a> kernel() { <span class="keywordflow">return</span> model.kernel; }
<a name="l00566"></a>00566    
<a name="l00568"></a><a class="code" href="classLWPR__Object.html#2eb764a5618605d8be4425e269c7659c">00568</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> meanX() {
<a name="l00569"></a>00569       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> mx(model.nIn);
<a name="l00570"></a>00570       memcpy(model.mean_x,&amp;mx[0],<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nIn);
<a name="l00571"></a>00571       <span class="keywordflow">return</span> mx;
<a name="l00572"></a>00572    }
<a name="l00573"></a>00573 
<a name="l00575"></a><a class="code" href="classLWPR__Object.html#660fff299901421c82737a0e867fe8bb">00575</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> varX() {
<a name="l00576"></a>00576       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> vx(model.nIn);
<a name="l00577"></a>00577       memcpy(model.var_x, &amp;vx[0],<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nIn);
<a name="l00578"></a>00578       <span class="keywordflow">return</span> vx;
<a name="l00579"></a>00579    }
<a name="l00580"></a>00580    
<a name="l00583"></a><a class="code" href="classLWPR__Object.html#24684a96da1f581db323b7b634863302">00583</a>    <span class="keywordtype">void</span> normIn(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; norm) {
<a name="l00584"></a>00584       <span class="keywordflow">if</span> (norm.size()!=model.nIn) {
<a name="l00585"></a>00585          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd90c4a3668e0fe84e1cece2f01310a8c046">LWPR_Exception::BAD_INPUT_DIM</a>);      
<a name="l00586"></a>00586       }
<a name="l00587"></a>00587       memcpy(model.norm_in,&amp;norm[0],<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nIn);
<a name="l00588"></a>00588    }
<a name="l00589"></a>00589 
<a name="l00591"></a><a class="code" href="classLWPR__Object.html#4d8ae3a48204f1633aba23ee687ecea1">00591</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> normIn()<span class="keyword"> const </span>{
<a name="l00592"></a>00592       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> norm(model.nIn);
<a name="l00593"></a>00593       memcpy(&amp;norm[0],model.norm_in,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nIn);
<a name="l00594"></a>00594       <span class="keywordflow">return</span> norm;
<a name="l00595"></a>00595    }
<a name="l00596"></a>00596    
<a name="l00599"></a><a class="code" href="classLWPR__Object.html#ab24eed6940e23aee031d3479492d8da">00599</a>    <span class="keywordtype">void</span> normOut(<span class="keyword">const</span> <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a>&amp; norm) {
<a name="l00600"></a>00600       <span class="keywordflow">if</span> (norm.size()!=model.nOut) {
<a name="l00601"></a>00601          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9042930a5c7a7d57a905949a9866c2375e">LWPR_Exception::BAD_OUTPUT_DIM</a>);
<a name="l00602"></a>00602       }
<a name="l00603"></a>00603       memcpy(model.norm_out,&amp;norm[0],<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nOut);
<a name="l00604"></a>00604    }
<a name="l00605"></a>00605 
<a name="l00607"></a><a class="code" href="classLWPR__Object.html#1bdb5342579acf892da0359e220e016c">00607</a>    <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> normOut()<span class="keyword"> const </span>{
<a name="l00608"></a>00608       <a class="code" href="group__LWPR__CPP.html#gd683d2318af954b2d2245b5a4b328e92">doubleVec</a> norm(model.nOut);
<a name="l00609"></a>00609       memcpy(&amp;norm[0],model.norm_out,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*model.nOut);
<a name="l00610"></a>00610       <span class="keywordflow">return</span> norm;
<a name="l00611"></a>00611    }
<a name="l00612"></a>00612    
<a name="l00614"></a><a class="code" href="classLWPR__Object.html#fed686ef83cc0fb1ab4265a662cb50f7">00614</a>    <span class="keywordtype">int</span> numRFS(<span class="keywordtype">int</span> outDim) {
<a name="l00615"></a>00615       <span class="keywordflow">if</span> (outDim &lt; 0 || outDim &gt;= model.nOut) <span class="keywordflow">return</span> 0;
<a name="l00616"></a>00616       <span class="keywordflow">return</span> model.sub[outDim].numRFS;
<a name="l00617"></a>00617    }
<a name="l00618"></a>00618    
<a name="l00620"></a><a class="code" href="classLWPR__Object.html#87e2c05ba34662ff86a4194944fb256a">00620</a>    std::vector&lt;int&gt; numRFS() {
<a name="l00621"></a>00621       std::vector&lt;int&gt; num(model.nOut);
<a name="l00622"></a>00622       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;model.nOut;i++) num[i] = model.sub[i].numRFS;
<a name="l00623"></a>00623       <span class="keywordflow">return</span> num;
<a name="l00624"></a>00624    }
<a name="l00625"></a>00625    
<a name="l00638"></a><a class="code" href="classLWPR__Object.html#3529adaad41b380fe8e89f02dc1ec0ab">00638</a>    <a class="code" href="classLWPR__ReceptiveFieldObject.html">LWPR_ReceptiveFieldObject</a> getRF(<span class="keywordtype">int</span> outDim, <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l00639"></a>00639       <span class="keywordflow">if</span> (outDim &lt; 0 || outDim &gt;= model.nOut) {
<a name="l00640"></a>00640          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9029693c3d5207b6a39ae59fd1c58aab48">LWPR_Exception::OUT_OF_RANGE</a>);
<a name="l00641"></a>00641       }
<a name="l00642"></a>00642       <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= model.sub[outDim].numRFS) { 
<a name="l00643"></a>00643          <span class="keywordflow">throw</span> <a class="code" href="classLWPR__Exception.html">LWPR_Exception</a>(<a class="code" href="classLWPR__Exception.html#9b69e2356aded79e5fa54f0c2341bd9029693c3d5207b6a39ae59fd1c58aab48">LWPR_Exception::OUT_OF_RANGE</a>);
<a name="l00644"></a>00644       }
<a name="l00645"></a>00645       <span class="keywordflow">return</span> <a class="code" href="classLWPR__ReceptiveFieldObject.html">LWPR_ReceptiveFieldObject</a>(model.sub[outDim].rf[index]);
<a name="l00646"></a>00646    }
<a name="l00647"></a>00647    
<a name="l00649"></a><a class="code" href="classLWPR__Object.html#685a4ae57c12ed54306f0ed4cd9ff4cc">00649</a>    <a class="code" href="structLWPR__Model.html">LWPR_Model</a> model;
<a name="l00650"></a>00650 };
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 2 13:44:42 2008 for LWPR Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
